app-id: com.lablicate.OpenChrom
runtime: org.gnome.Platform
runtime-version: '49'
sdk: org.gnome.Sdk
command: openchrom
finish-args:
- --socket=wayland
- --socket=fallback-x11
- --share=ipc
- --device=dri
- --share=network
- --socket=pulseaudio
- --persist=.openchrom
- --persist=.eclipse/org.eclipse.swtchart.extensions
- --filesystem=/tmp:rw
- --talk-name=org.freedesktop.secrets
modules:
- name: gdk-pixbuf
  buildsystem: meson
  config-opts:
  - -Dothers=enabled
  - -Dman=false
  - -Ddocumentation=false
  - -Dtests=false
  - -Dinstalled_tests=false
  - -Dbuiltin_loaders=all
  sources:
  - type: git
    url: https://gitlab.gnome.org/GNOME/gdk-pixbuf.git
    tag: 2.44.4
    commit: c9e6d11cbfa085d7b59dd6ad3b1cbfa26348ce13
- name: openchrom
  buildsystem: simple
  build-options:
    strip: false
    no-debuginfo: true
  build-commands:
  - mv openchrom ${FLATPAK_DEST}/openchrom/
  - mkdir -p ${FLATPAK_DEST}/bin
  - ln -sf ${FLATPAK_DEST}/openchrom/openchrom ${FLATPAK_DEST}/bin/
  - install -Dm644 ${FLATPAK_ID}.desktop ${FLATPAK_DEST}/share/applications/${FLATPAK_ID}.desktop
  - install -Dm644 ${FLATPAK_ID}.png ${FLATPAK_DEST}/share/icons/hicolor/256x256/apps/${FLATPAK_ID}.png
  - install -Dm644 ${FLATPAK_ID}.metainfo.xml ${FLATPAK_DEST}/share/metainfo/${FLATPAK_ID}.metainfo.xml
  sources:
  - type: archive
    only-arches:
    - x86_64
    url: https://products.lablicate.com/openchrom/1.6.2/openchrom_linux.x86_64_1.6.2.tar.gz
    sha256: be440395c69a38d93feb9f473fb7c5d1fae25c98af20d48fb6cf2ba0d423b037
    strip-components: 0
    dest: openchrom
  - type: archive
    only-arches:
    - aarch64
    url: https://products.lablicate.com/openchrom/1.6.2/openchrom_linux.aarch64_1.6.2.tar.gz
    sha256: 87c364fac9469316ccce606d9040d4ab62ee9de7bf278f19fe0b9dd0a171c29a
    strip-components: 0
    dest: openchrom
  - type: file
    path: com.lablicate.OpenChrom.desktop
  - type: file
    path: com.lablicate.OpenChrom.png
  - type: file
    path: com.lablicate.OpenChrom.metainfo.xml
